<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CnxPath module | Cnx A Proof-of-Concept For A Modern Standard Library for GNU C23</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">Cnx <span class="m-thin">A Proof-of-Concept For A Modern Standard Library for GNU C23</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="modules.html">Modules</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="2">
            <li><a href="annotated.html">Classes</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          CnxPath <span class="m-thin">module</span></h1>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#func-members">Functions</a></li>
              </ul>
            </li>
          </ul>
        </nav>
<p><code>CnxPath</code> provides utilities for working with filesystem paths and perfoming basic file system operations, such as checking the current status (or lack thereof) of a path on the filesystem, querying attributes of an existing path on the file system, creating and removing files, directories, and symbolic links, and retrieving semantically correct paths for certain special filesystem paths, such as the user home directory.</p><p>Example:</p><pre class="m-code"><span class="cp">#include</span> <span class="cpf">&lt;Cnx/filesystem/Path.h&gt;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">example</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">let</span> <span class="n">path</span> <span class="o">=</span> <span class="n">cnx_string_from</span><span class="p">(</span><span class="s">&quot;/home/my_user/test.txt&quot;</span><span class="p">);</span>
    <span class="n">let</span> <span class="n">create_res</span> <span class="o">=</span> <span class="n">cnx_path_create_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_result_is_ok</span><span class="p">(</span><span class="n">create_res</span><span class="p">),</span> <span class="s">&quot;Failed to create test path&quot;</span><span class="p">);</span>

    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_path_is_valid</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">),</span>
               <span class="s">&quot;Path is not a valid filesystem path on this platform&quot;</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_path_exists</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">),</span> <span class="s">&quot;Path does not exist!&quot;</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_path_is_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">),</span> <span class="s">&quot;Path is not a file!&quot;</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="o">!</span><span class="n">cnx_path_is_directory</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">),</span> <span class="s">&quot;Path is a directory !?&quot;</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="o">!</span><span class="n">cnx_path_is_symlink</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">),</span> <span class="s">&quot;Path is a symlink !?&quot;</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_path_is_absolute</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">),</span> <span class="s">&quot;Path is not absolute!&quot;</span><span class="p">);</span>

    <span class="n">let</span> <span class="n">name</span> <span class="o">=</span> <span class="n">cnx_string_from</span><span class="p">(</span><span class="s">&quot;test.txt&quot;</span><span class="p">);</span>
    <span class="n">let</span> <span class="n">name_without_extension</span> <span class="o">=</span> <span class="n">cnx_string_from</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>
    <span class="n">let</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">cnx_string_from</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>

    <span class="n">let</span> <span class="n">name_actual</span> <span class="o">=</span> <span class="n">cnx_path_get_file_name</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_string_equal</span><span class="p">(</span><span class="n">name_actual</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">name</span><span class="p">),</span> <span class="s">&quot;path name is not test.txt!&quot;</span><span class="p">);</span>

    <span class="n">let</span> <span class="n">name_without_extension_actual</span> <span class="o">=</span> <span class="n">cnx_path_get_file_name_without_extension</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_string_equal</span><span class="p">(</span><span class="n">name_without_extension_actual</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">name_without_extension</span><span class="p">),</span>
               <span class="s">&quot;path name without extension is not test!&quot;</span><span class="p">);</span>

    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_path_has_file_extension</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">extension</span><span class="p">),</span>
               <span class="s">&quot;path name does not have .txt file extension&quot;</span><span class="p">);</span>

    <span class="n">let</span> <span class="n">parent</span> <span class="o">=</span> <span class="n">cnx_string_from</span><span class="p">(</span><span class="s">&quot;/home/my_user&quot;</span><span class="p">);</span>

    <span class="n">let</span> <span class="n">parent_actual</span> <span class="o">=</span> <span class="n">cnx_path_get_parent_directory</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_string_equal</span><span class="p">(</span><span class="n">parent_actual</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">parent</span><span class="p">),</span> <span class="s">&quot;Path&#39;s parent is not /home/my_user!&quot;</span><span class="p">);</span>

    <span class="n">let</span> <span class="n">remove_res</span> <span class="o">=</span> <span class="n">cnx_path_remove_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">);</span>
    <span class="n">cnx_assert</span><span class="p">(</span><span class="n">cnx_result_is_ok</span><span class="p">(</span><span class="n">remove_res</span><span class="p">),</span> <span class="s">&quot;Failed to remove test file!&quot;</span><span class="p">);</span>
<span class="p">}</span></pre>
        <section id="func-members">
          <h2><a href="#func-members">Functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">bool <a href="#ga0980b8df9eb375bc6c1635f7b2adafd5" class="m-doc">cnx_path_is_valid</a>(</span><span class="m-doc-wrap">const <a href="structCnxString.html" class="m-doc">CnxString</a>*restrict path)</span>
            </dt>
            <dd>Checks if the given string would be a valid path on the host platform&#x27;s filesystem.</dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="structCnxString.html" class="m-doc">CnxPath</a> <a href="#ga773da93ad9865f549b549ac4ade9c905" class="m-doc">cnx_path_new</a>(</span><span class="m-doc-wrap">const <a href="structCnxString.html" class="m-doc">CnxString</a>*restrict path)</span>
            </dt>
            <dd>Creates a new path from the given string, potentially modified so as to be valid on the host platform.</dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="structCnxString.html" class="m-doc">CnxPath</a> <a href="#ga2a7c14467b702fccf2268d2c98f1694a" class="m-doc">cnx_user_home_directory</a>(</span><span class="m-doc-wrap">void)</span>
            </dt>
            <dd>Returns the path to the home directory of the user running this Program.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="ga0980b8df9eb375bc6c1635f7b2adafd5"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ga0980b8df9eb375bc6c1635f7b2adafd5" class="m-doc-self">cnx_path_is_valid</a>(</span><span class="m-doc-wrap">const <a href="structCnxString.html" class="m-doc">CnxString</a>*restrict path)</span></span>
              <div class="m-doc-include m-code m-inverted m-text-right"><span class="cp">#include</span> <a class="cpf" href="Path_8h.html">&lt;include/Cnx/filesystem/Path.h&gt;</a></div>
            </h3>
            <p>Checks if the given string would be a valid path on the host platform&#x27;s filesystem.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">path</td>
                  <td>- The path to check for validity</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>whether the path is valid</td>
                </tr>
              </tfoot>
            </table>
<p>Checks if the given path is syntactically valid on the host platform&#x27;s filesystem. Does not check if the path exists or is semantically logical.</p>
          </div></section>
          <section class="m-doc-details" id="ga773da93ad9865f549b549ac4ade9c905"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="structCnxString.html" class="m-doc">CnxPath</a> </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ga773da93ad9865f549b549ac4ade9c905" class="m-doc-self">cnx_path_new</a>(</span><span class="m-doc-wrap">const <a href="structCnxString.html" class="m-doc">CnxString</a>*restrict path)</span></span>
              <div class="m-doc-include m-code m-inverted m-text-right"><span class="cp">#include</span> <a class="cpf" href="Path_8h.html">&lt;include/Cnx/filesystem/Path.h&gt;</a></div>
            </h3>
            <p>Creates a new path from the given string, potentially modified so as to be valid on the host platform.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">path</td>
                  <td>- The string to create a path from</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td><code>path</code> converted to a valid filesystem path</td>
                </tr>
              </tfoot>
            </table>
<p>If the given string would be a valid path on the host platform&#x27;s filesystem, this simply returns a clone of the string. Otherwise, this will return a modified version of the given string, converted to be a valid filesystem path.</p><p>For example, if <code>path</code> is &quot;/home\\user_name//file.txt&quot; on *NIX, path separators will be converted to all be *NIX style separators and redundant separators will be removed. As a result, the returned path would be &quot;/home/user_name/file.txt&quot;</p><p>Coincidentally, this means that all paths created through this function can use a consistent path separator for all platforms, and separators will automatically be converted to the correct one for the platform at runtime. IE: all paths can be declared with *NIX style separators, but will be correctly converted to &#x27;\&#x27; on Windows</p>
          </div></section>
          <section class="m-doc-details" id="ga2a7c14467b702fccf2268d2c98f1694a"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="structCnxString.html" class="m-doc">CnxPath</a> </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ga2a7c14467b702fccf2268d2c98f1694a" class="m-doc-self">cnx_user_home_directory</a>(</span><span class="m-doc-wrap">void)</span></span>
              <div class="m-doc-include m-code m-inverted m-text-right"><span class="cp">#include</span> <a class="cpf" href="Path_8h.html">&lt;include/Cnx/filesystem/Path.h&gt;</a></div>
            </h3>
            <p>Returns the path to the home directory of the user running this Program.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>The current user&#x27;s home directory</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Cnx A Proof-of-Concept For A Modern Standard Library for GNU C23. Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.4 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
